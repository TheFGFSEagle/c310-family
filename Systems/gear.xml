<?xml version="1.0" encoding="UTF-8"?>
<system name="gear">
	<channel name="Nose wheel steering">
		<switch name="gear/unit[0]/steering-enabled">
			<default value="0"/>
			<test logic="OR" value="1">
				gear/unit[0]/pos-norm EQ 1
			</test>
		</switch>
		
		<fcs_function name="gear/unit[0]/brakes-steer-factor">
			<function>
				<product>
					<sum>
						<product>
							<property>fcs/left-brake-cmd-norm</property>
							<value>-1</value>
						</product>
						<property>fcs/right-brake-cmd-norm</property>
					</sum>
					<property>/gear/gear[0]/rollspeed-ms</property>
					<value>0.5</value> <!-- for adjusting braking influence -->
					<property>gear/unit[0]/steering-enabled</property>
				</product>
			</function>
		</fcs_function>
		
		<!-- Drive the nose wheel with the rudder and brakes -->
		<fcs_function name="fcs/steer-cmd-norm">
			<function>
				<quotient>
					<table name="fcs/steer-cmd-deg">
						<independentVar lookup="row">gear/unit[0]/brakes-steer-factor</independentVar>
						<independentVar lookup="column">/controls/flight/rudder</independentVar>
						<tableData>
							-1	0	1
						  -1	-55	0	15
						   0	-15	0	15
						   1	-15	0	55
						</tableData>
					</table>
					<value>55</value>
				</quotient>
			</function>
		</fcs_function>
		
		<pure_gain name="fcs/steer-pos-norm">
			<input>fcs/steer-cmd-norm</input>
			<gain>gear/unit[0]/pos-norm</gain>
			<output>/gear/gear[0]/steering-norm</output>
		</pure_gain>
		
		<pure_gain name="fcs/steer-pos-deg">
			<input>fcs/steer-pos-norm</input>
			<gain>55</gain>
			<output>/gear/gear[0]/steering-deg</output>
		</pure_gain>
	</channel>
	
	<channel name="Gear compression">
		<fcs_function name="gear/unit/compression-norm">
			<function>
				<table>
					<independentVar>gear/unit/compression-ft</independentVar>
					<tableData>
						0			0
						0.38711	1
					</tableData>
				</table>
			</function>
			<output>/gear/gear/compression-norm</output>
		</fcs_function>
		
		<pure_gain name="gear/unit/compression-m">
			<input>gear/unit/compression-norm</input>
			<gain>0.11799</gain>
			<output>/gear/gear/compression-m</output>
		</pure_gain>
		
		<fcs_function name="gear/unit[1]/compression-norm">
			<function>
				<table>
					<independentVar>gear/unit[1]/compression-ft</independentVar>
					<tableData>
						0			0
						0.47556	1
					</tableData>
				</table>
			</function>
			<output>/gear/gear/compression-norm</output>
		</fcs_function>
		
		<pure_gain name="gear/unit[1]/compression-m">
			<input>gear/unit[1]/compression-norm</input>
			<gain>0.14495</gain>
			<output>/gear/gear[1]/compression-m</output>
		</pure_gain>
		
		<fcs_function name="gear/unit[2]/compression-norm">
			<function>
				<table>
					<independentVar>gear/unit[2]/compression-ft</independentVar>
					<tableData>
						0			0
						0.47556	1
					</tableData>
				</table>
			</function>
			<output>/gear/gear/compression-norm</output>
		</fcs_function>
		
		<pure_gain name="gear/unit[2]/compression-m">
			<input>gear/unit[2]/compression-norm</input>
			<gain>0.14495</gain>
			<output>/gear/gear[2]/compression-m</output>
		</pure_gain>
	</channel>
</system>
