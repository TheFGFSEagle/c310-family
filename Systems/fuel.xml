<?xml version="1.0" encoding="UTF-8"?>
<system name="fuel">
	<property>propulsion/tank[0]/leak-flow-rate-pps</property>
	<property>propulsion/tank[1]/leak-flow-rate-pps</property>
	<property>propulsion/tank[2]/leak-flow-rate-pps</property>
	<property>propulsion/tank[3]/leak-flow-rate-pps</property>
	<property>propulsion/tank[0]/vent-blocked</property>
	<property>propulsion/tank[1]/vent-blocked</property>
	<property>propulsion/tank[2]/vent-blocked</property>
	<property>propulsion/tank[3]/vent-blocked</property>
	
	<channel rate="120">
		<switch>
			<default value="1"/>
			<test value="0">
				/sim/equipment/auxiliary-fuel-tanks EQ 1
			</test>
			<output>/consumables/fuel/tank[2]/hidden</output>
			<output>/consumables/fuel/tank[3]/hidden</output>
		</switch>
	</channel>
	
	<channel name="Left main tank">
		<pure_gain name="propulsion/tank[0]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[0]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[0]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[0]/vent-blocked EQ 0
				propulsion/tank[0]/pct-full GT 0
				propulsion/tank[6]/pct-full LT 75
				/controls/fuel/selector[0] == 1
			</test>
		</switch>
		
		<switch name="propulsion/tank[0]/to-cross-feed-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[0]/vent-blocked EQ 0
				propulsion/tank[0]/pct-full GT 0
				propulsion/tank[4]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[0]/external-flow-rate-pps">
			<input>-propulsion/tank[0]/leak-flow-rate-pps</input>
			<input>-propulsion/tank[0]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[0]/to-fuel-selector-flow-rate-pps</input>
			<input>-propulsion/tank[0]/to-cross-feed-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right main tank">
		<pure_gain name="propulsion/tank[1]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[1]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[1]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[1]/vent-blocked EQ 0
				propulsion/tank[1]/pct-full GT 0
				propulsion/tank[7]/pct-full LT 75
				/controls/fuel/selector[1] == 1
			</test>
		</switch>
		
		<switch name="propulsion/tank[1]/to-cross-feed-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[1]/vent-blocked EQ 0
				propulsion/tank[1]/pct-full GT 0
				propulsion/tank[5]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[1]/external-flow-rate-pps">
			<input>-propulsion/tank[1]/leak-flow-rate-pps</input>
			<input>-propulsion/tank[1]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[1]/to-fuel-selector-flow-rate-pps</input>
			<input>-propulsion/tank[1]/to-cross-feed-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Left aux tank">
		<pure_gain name="propulsion/tank[2]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[2]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[2]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[2]/vent-blocked EQ 0
				propulsion/tank[2]/pct-full GT 0
				propulsion/tank[6]/pct-full LT 75
				/controls/fuel/selector[0] == 2
			</test>
		</switch>
		
		<summer name="propulsion/tank[2]/external-flow-rate-pps">
			<input>-propulsion/tank[2]/leak-flow-rate-pps</input>
			<input>-propulsion/tank[2]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[2]/to-fuel-selector-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right aux tank">
		<pure_gain name="propulsion/tank[3]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[3]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[3]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[3]/vent-blocked EQ 0
				propulsion/tank[3]/pct-full GT 0
				propulsion/tank[7]/pct-full LT 75
				/controls/fuel/selector[1] == 2
			</test>
		</switch>
		
		<summer name="propulsion/tank[3]/external-flow-rate-pps">
			<input>-propulsion/tank[3]/leak-flow-rate-pps</input>
			<input>-propulsion/tank[3]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[3]/to-fuel-selector-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Cross feed line left to right">
		<pure_gain name="propulsion/tank[4]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[4]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[4]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[4]/pct-full GT 25
				propulsion/tank[7]/pct-full LT 75
				/controls/fuel/selector[1] == 3
			</test>
		</switch>
		
		<summer name="propulsion/tank[4]/external-flow-rate-pps">
			<input>propulsion/tank[0]/to-cross-feed-flow-rate-pps</input>
			<input>-propulsion/tank[4]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[4]/to-fuel-selector-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Cross feed line right to left">
		<pure_gain name="propulsion/tank[5]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[5]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[5]/to-fuel-selector-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[5]/pct-full GT 25
				propulsion/tank[6]/pct-full LT 75
				/controls/fuel/selector[0] == 3
			</test>
		</switch>
		
		<summer name="propulsion/tank[5]/external-flow-rate-pps">
			<input>propulsion/tank[1]/to-cross-feed-flow-rate-pps</input>
			<input>-propulsion/tank[5]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[5]/to-fuel-selector-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Left fuel selector">
		<switch name="propulsion/tank[6]/to-fuel-strainer-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[6]/pct-full GT 25
				propulsion/tank[8]/pct-full LT 75
				/controls/fuel/selector[0] NE 0
			</test>
		</switch>
		
		<summer name="propulsion/tank[6]/external-flow-rate-pps">
			<input>propulsion/tank[0]/to-fuel-selector-flow-rate-pps</input>
			<input>propulsion/tank[2]/to-fuel-selector-flow-rate-pps</input>
			<input>propulsion/tank[5]/to-fuel-selector-flow-rate-pps</input>
			<input>-propulsion/tank[6]/to-fuel-strainer-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right fuel selector">
		<switch name="propulsion/tank[7]/to-fuel-strainer-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[7]/pct-full GT 25
				propulsion/tank[9]/pct-full LT 75
				/controls/fuel/selector[1] NE 0
			</test>
		</switch>
		
		<summer name="propulsion/tank[7]/external-flow-rate-pps">
			<input>propulsion/tank[1]/to-fuel-selector-flow-rate-pps</input>
			<input>propulsion/tank[3]/to-fuel-selector-flow-rate-pps</input>
			<input>propulsion/tank[4]/to-fuel-selector-flow-rate-pps</input>
			<input>-propulsion/tank[7]/to-fuel-strainer-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Left fuel strainer">
		<pure_gain name="propulsion/tank[8]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[8]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[8]/to-carburetor-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[8]/pct-full GT 25
				propulsion/tank[10]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[8]/external-flow-rate-pps">
			<input>-propulsion/tank[8]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[8]/to-carburetor-flow-rate-pps</input>
			<input>propulsion/tank[6]/to-fuel-strainer-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right fuel strainer">
		<pure_gain name="propulsion/tank[9]/drain-flow-rate-pps">
			<input>/controls/fuel/tank[9]/drain-valve</input>
			<gain>2</gain>
		</pure_gain>
		
		<switch name="propulsion/tank[9]/to-carburetor-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[9]/pct-full GT 25
				propulsion/tank[11]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[9]/external-flow-rate-pps">
			<input>-propulsion/tank[9]/drain-flow-rate-pps</input>
			<input>-propulsion/tank[9]/to-carburetor-flow-rate-pps</input>
			<input>propulsion/tank[7]/to-fuel-strainer-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Left carburetor">
		<switch name="propulsion/tank[10]/to-manifold-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[10]/pct-full GT 25
				propulsion/tank[12]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[10]/external-flow-rate-pps">
			<input>-propulsion/tank[10]/to-manifold-flow-rate-pps</input>
			<input>propulsion/tank[8]/to-carburetor-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right carburetor">
		<switch name="propulsion/tank[11]/to-manifold-flow-rate-pps">
			<default value="0"/>
			<test value="0.1" logic="AND">
				propulsion/tank[11]/pct-full GT 25
				propulsion/tank[13]/pct-full LT 75
			</test>
		</switch>
		
		<summer name="propulsion/tank[11]/external-flow-rate-pps">
			<input>-propulsion/tank[11]/to-manifold-flow-rate-pps</input>
			<input>propulsion/tank[9]/to-carburetor-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Left engine intake manifold">
		<summer name="propulsion/tank[12]/external-flow-rate-pps">
			<input>propulsion/tank[10]/to-manifold-flow-rate-pps</input>
		</summer>
	</channel>
	
	<channel name="Right engine intake manifold">
		<summer name="propulsion/tank[13]/external-flow-rate-pps">
			<input>propulsion/tank[11]/to-manifold-flow-rate-pps</input>
		</summer>
	</channel>
</system>
