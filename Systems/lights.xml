<?xml version="1.0" encoding="UTF-8"?>
<PropertyList>
	<filter>
		<type>noise-spike</type>
		<input>
			<expression>
				<product>
					<property>/controls/lighting/nav-lights</property>
					<div>
						<property>/systems/electrical/consumers/nav-lights/amps</property>
						<property>/systems/electrical/consumers/nav-lights/rated-amps</property>
					</div>
					<floor>
						<product>
							<mod>
								<property>/sim/time/elapsed-sec</property>
								<value>1</value>
							</mod>
							<value>1.5</value>
						</product>
					</floor>
				</product>
			</expression>
		</input>
		<output>/sim/model/lights/nav/brightness-norm</output>
		<max-rate-of-change>4</max-rate-of-change>
	</filter>
	
	<filter>
		<type>noise-spike</type>
		<input>
			<expression>
				<product>
					<abs>
						<min>
							<property>/controls/lighting/landing-light[1]</property>
							<value>0</value>
						</min>
					</abs>
					<div>
						<property>/systems/electrical/consumers/taxi-light/amps</property>
						<property>/systems/electrical/consumers/taxi-light/rated-amps</property>
					</div>
				</product>
			</expression>
		</input>
		<output>/sim/model/lights/taxi/brightness-norm</output>
		<max-rate-of-change>4</max-rate-of-change>
	</filter>
	
	<filter>
		<type>noise-spike</type>
		<input>
			<expression>
				<product>
					<property>/controls/lighting/beacon</property>
					<div>
						<property>/systems/electrical/consumers/rotating-beacon/amps</property>
						<property>/systems/electrical/consumers/rotating-beacon/rated-amps</property>
					</div>
				</product>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/brightness-norm</output>
		<max-rate-of-change>4</max-rate-of-change>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<mod>
					<sum>
						<property>/sim/model/lights/beacon/rotation-deg</property>
						<product>
							<property>/sim/model/lights/beacon/brightness-norm</property>
							<value>270</value>
							<div>
								<property>/systems/electrical/consumers/rotating-beacon-motor[0]/amps</property>
								<property>/systems/electrical/consumers/rotating-beacon-motor[0]/rated-amps</property>
							</div>
							<property>/sim/time/delta-sec</property>
						</product>
					</sum>
					<value>360</value>
				</mod>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/rotation-deg</output>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<cos>
					<deg2rad>
						<property>/sim/model/lights/beacon/rotation-deg</property>
					</deg2rad>
				</cos>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/pointing-x[0]</output>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<sin>
					<deg2rad>
						<property>/sim/model/lights/beacon/rotation-deg</property>
					</deg2rad>
				</sin>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/pointing-y[0]</output>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<cos>
					<deg2rad>
						<sum>
							<property>/sim/model/lights/beacon/rotation-deg</property>
							<value>180</value>
						</sum>
					</deg2rad>
				</cos>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/pointing-x[1]</output>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<sin>
					<deg2rad>
						<sum>
							<property>/sim/model/lights/beacon/rotation-deg</property>
							<value>180</value>
						</sum>
					</deg2rad>
				</sin>
			</expression>
		</input>
		<output>/sim/model/lights/beacon/pointing-y[1]</output>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<expression>
				<sum>
					<property>/sim/model/lights/landing[0]/pos-norm</property>
					<product>
						<property>/controls/lighting/landing-light[0]</property>
						<property>/sim/time/delta-sec</property>
						<div>
							<property>/systems/electrical/consumers/landing-light-motor[0]/amps</property>
							<property>/systems/electrical/consumers/landing-light-motor[0]/rated-amps</property>
						</div>
						<value>0.2</value>
					</product>
				</sum>
			</expression>
		</input>
		<output>/sim/model/lights/landing[0]/pos-norm</output>
		<min>0</min>
		<max>1</max>
	</filter>
	
	<filter>
		<type>gain</type>
		<gain>/sim/model/lights/landing[0]/max-extension-deg</gain>
		<input>/sim/model/lights/landing[0]/pos-norm</input>
		<output>/sim/model/lights/landing[0]/pos-deg</output>
	</filter>
					
	<filter>
		<type>noise-spike</type>
		<input>
			<condition>
				<greater-than>
					<property>/sim/model/lights/landing[0]/pos-norm</property>
					<value>0.95</value>
				</greater-than>
			</condition>
			<expression>
				<product>
					<max>
						<property>/controls/lighting/landing-light[0]</property>
						<value>0</value>
					</max>
					<div>
						<property>/systems/electrical/consumers/landing-light[0]/amps</property>
						<property>/systems/electrical/consumers/landing-light[0]/rated-amps</property>
					</div>
				</product>
			</expression>
		</input>
		<output>/sim/model/lights/landing[0]/brightness-norm</output>
		<max-rate-of-change>3</max-rate-of-change>
	</filter>
	
	<filter>
		<type>gain</type>
		<input>
			<condition>
				<property>/sim/equipment/right-landing-light</property>
			</condition>
			<expression>
				<sum>
					<property>/sim/model/lights/landing[1]/pos-norm</property>
					<product>
						<property>/controls/lighting/landing-light[1]</property>
						<property>/sim/time/delta-sec</property>
						<div>
							<property>/systems/electrical/consumers/landing-light-motor[1]/amps</property>
							<property>/systems/electrical/consumers/landing-light-motor[1]/rated-amps</property>
						</div>
						<value>0.2</value>
					</product>
				</sum>
			</expression>
		</input>
		<output>/sim/model/lights/landing[1]/pos-norm</output>
		<min>0</min>
		<max>1</max>
	</filter>
	
	<filter>
		<type>gain</type>
		<gain>/sim/model/lights/landing[1]/max-extension-deg</gain>
		<input>
			<condition>
				<property>/sim/equipment/right-landing-light</property>
			</condition>
			<property>/sim/model/lights/landing[1]/pos-norm</property>
		</input>
		<output>/sim/model/lights/landing[1]/pos-deg</output>
	</filter>
					
	<filter>
		<type>noise-spike</type>
		<input>
			<condition>
				<and>
					<greater-than>
						<property>/sim/model/lights/landing[1]/pos-norm</property>
						<value>0.95</value>
					</greater-than>
					<property>/sim/equipment/right-landing-light</property>
				</and>
			</condition>
			<expression>
				<product>
					<max>
						<property>/controls/lighting/landing-light[1]</property>
						<value>0</value>
					</max>
					<div>
						<property>/systems/electrical/consumers/landing-light[1]/amps</property>
						<property>/systems/electrical/consumers/landing-light[1]/rated-amps</property>
					</div>
				</product>
			</expression>
		</input>
		<output>/sim/model/lights/landing[1]/brightness-norm</output>
		<max-rate-of-change>3</max-rate-of-change>
	</filter>
	
	<filter>
		<name>Clock backlight intensity</name>
		<type>gain</type>
		<input>
			<condition>
				<equals>
					<property>/parts/selected-clock</property>
					<value>AT420100</value>
				</equals>
			</condition>
			<expression>
				<div>
					<property>/systems/electrical/consumers/clock-backlight/amps</property>
					<property>/systems/electrical/consumers/clock-backlight/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/instrumentation/clock/backlight-norm</output>
	</filter>
	
	<filter>
		<name>Left UV instrument light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<property>/systems/electrical/consumers/uv-instrument-light[0]/amps</property>
					<property>/systems/electrical/consumers/uv-instrument-light[0]/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/uv-instrument[0]/brightness-norm</output>
	</filter>
	<filter>
		<name>Right UV instrument light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<property>/systems/electrical/consumers/uv-instrument-light[1]/amps</property>
					<property>/systems/electrical/consumers/uv-instrument-light[1]/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/uv-instrument[1]/brightness-norm</output>
	</filter>
	<filter>
		<name>Red instrument light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<property>/systems/electrical/consumers/red-instrument-light/amps</property>
					<property>/systems/electrical/consumers/red-instrument-light/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/red-instrument/brightness-norm</output>
	</filter>
	<filter>
		<name>Front dome light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<property>/systems/electrical/consumers/front-dome-light/amps</property>
					<property>/systems/electrical/consumers/front-dome-light/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/front-dome/brightness-norm</output>
	</filter>
	<filter>
		<name>Rear dome light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<property>/systems/electrical/consumers/rear-dome-light/amps</property>
					<property>/systems/electrical/consumers/rear-dome-light/rated-amps</property>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/rear-dome/brightness-norm</output>
	</filter>
	
	<filter>
		<name>Map light spot exponent</name>
		<type>gain</type>
		<input>
			<expression>
				<sum>
					<value>1</value>
					<div>
						<value>300</value>
						<max>
							<property>controls/lighting/map/spot-cutoff-deg</property>
							<value>1</value>
						</max>
					</div>
				</sum>
			</expression>
		</input>
		<output>/sim/model/lights/map/spot-exponent</output>
	</filter>
	
	<filter>
		<name>Map light attenuation factor</name>
		<type>gain</type>
		<input>
			<expression>
				<pow>
					<div>
						<property>controls/lighting/map/spot-cutoff-deg</property>
						<property>controls/lighting/map/spot-cutoff-deg-max</property>
					</div>
					<div>
						<value>1</value>
						<value>1.2</value>
					</div>
				</pow>
			</expression>
		</input>
		<output>sim/model/lights/map/attenuation-factor</output>
	</filter>
	
	<filter>
		<name>Map light intensity</name>
		<type>gain</type>
		<input>
			<expression>
				<div>
					<product>
						<property>/systems/electrical/consumers/map-light/volts</property>
						<property>/systems/electrical/consumers/map-light/amps</property>
					</product>
					<product>
						<property>/systems/electrical/consumers/map-light/rated-volts</property>
						<property>/systems/electrical/consumers/map-light/rated-amps</property>
					</product>
				</div>
			</expression>
		</input>
		<output>/sim/model/lights/map/brightness-norm</output>
	</filter>
</PropertyList>
